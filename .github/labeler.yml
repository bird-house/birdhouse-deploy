# label rules used by .github/workflows/label.yml

# NOTE: all globs starting by a '*' must be quoted to parse properly

# label 'ci/operations' for all automation-related steps and files
#   Since this repository is in itself an automation process to deploy a server instance,
#   we refer here to CI as the 'meta' configuration files for managing the code and integrations with the repository,
#   not configurations related to the deployment process itself.
ci/operations:
  - changed-files:
    - any-glob-to-any-file:
      - .*  # all '.<something>' files
      - .github/**/*
      - docs/Makefile
      - Dockerfile*
      - birdhouse/docker/**/*
      - tests/**/*

ci/deployment:
  - changed-files:
    - any-glob-to-any-file:
      - birdhouse/deployment/**/*
      - birdhouse/scripts/**/*
      - birdhouse/templates/**/*
      - birdhouse/vagrant-utils/**/*
      - vagrant_variables.yml.example
      - Vagrantfile
      - birdhouse/**/*.include.sh
      - birdhouse/pavics-compose.sh
      - birdhouse/birdhouse-compose.sh

ci/tests:
  - changed-files:
    - any-glob-to-any-file:
      - "**/test*/**/*"  # eg: optional-components/test...
      - tests/**/*

documentation:
  - changed-files:
    - any-glob-to-any-file:
      - "*.rst"
      - "*.example"
      - ".readthedocs.yml"
      - ".zenodo.json"
      - docs/**/*
      - CONTRIBUTING.rst
      - CHANGES.md
      - LICENSE
      - "**/README.rst"

component/weaver:
  - changed-files:
    - any-glob-to-any-file:
      - birdhouse/**/weaver/**/*

component/cowbird:
  - changed-files:
    - any-glob-to-any-file:
      - birdhouse/**/cowbird/**/*

component/magpie:
  - changed-files:
    - any-glob-to-any-file:
      - birdhouse/**/magpie/**/*

component/twitcher:
  - changed-files:
    - any-glob-to-any-file:
      - birdhouse/**/twitcher/**/*

component/THREDDS:
  - changed-files:
    - any-glob-to-any-file:
      - birdhouse/**/thredds/**/*

component/geoserver:
  - changed-files:
    - any-glob-to-any-file:
      - birdhouse/**/geoserver/**/*
      - docker/geoserver/**/*

component/jupyterhub:
  - changed-files:
    - any-glob-to-any-file:
      - birdhouse/**/jupyterhub/**/*

component/STAC:
  - changed-files:
    - any-glob-to-any-file:
      - birdhouse/**/*stac*/**/*

feature/WPS:
  - changed-files:
    - any-glob-to-any-file:
      - birdhouse/**/finch/**/*
      - birdhouse/**/flyingpigeon/**/*
      - birdhouse/**/hummingbird/**/*
      - birdhouse/**/malleefowl/**/*
      - birdhouse/**/raven/**/*
      - birdhouse/**/weaver/**/*
      - birdhouse/**/wps_output-volume/**/*
      - birdhouse/**/*wps*/**/*

feature/node-registry:
  - changed-files:
    - any-glob-to-any-file:
      - birdhouse/**/service-config.json.template
      - birdhouse/scripts/get-version.include.sh
      - birdhouse/scripts/get-services-json.include.sh
