[tool.bumpversion]
current_version = "2.16.8"
commit = true
tag = false
tag_name = "{new_version}"
parse = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+) (?P<releaseTime>.*)?"
serialize = [
    "{major}.{minor}.{patch}",
    "{utcnow:%Y-%m-%dT%H:%M:%SZ}"
]

[[tool.bumpversion.files]]
filename = "CHANGES.md"
search = """[Unreleased](https://github.com/bird-house/birdhouse-deploy/tree/master) (latest)
------------------------------------------------------------------------------------------------------------------"""
replace = """[Unreleased](https://github.com/bird-house/birdhouse-deploy/tree/master) (latest)
------------------------------------------------------------------------------------------------------------------

[//]: # (list changes here, using '-' for each new entry, remove this when items are added)

[{new_version}](https://github.com/bird-house/birdhouse-deploy/tree/{new_version}) ({utcnow:%Y-%m-%d})
------------------------------------------------------------------------------------------------------------------"""

[[tool.bumpversion.files]]
filename = "Makefile"
search = "APP_VERSION := {current_version}"
replace = "APP_VERSION := {new_version}"

[[tool.bumpversion.files]]
filename = "README.rst"
search = "{current_version}"
replace = "{new_version}"

[[tool.bumpversion.files]]
filename = "RELEASE.txt"
search = "{current_version} 2025-08-13T13:48:58Z"
replace = "{new_version} {utcnow:%Y-%m-%dT%H:%M:%SZ}"

[[tool.bumpversion.parts]]
name = "releaseTime"
values = ["2025-08-13T13:48:58Z"]

[[tool.bumpversion.files]]
part = "version"
filename = "birdhouse/components/canarie-api/docker_configuration.py.template"
search = "'version': '{current_version}'"
replace = "'version': '{new_version}'"

[[tool.bumpversion.files]]
part = "releaseTime"
filename = "birdhouse/components/canarie-api/docker_configuration.py.template"
parse = "'releaseTime': '(?P<releaseTime>.*)'"
serialize = ["{releaseTime}"]
replace = "{utcnow:%Y-%m-%dT%H:%M:%SZ}"

[[tool.bumpversion.files]]
filename = "docs/source/conf.py"
search = "'{current_version}'"
replace = "'{new_version}'"
