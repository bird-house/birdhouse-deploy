if ! echo "${BIRDHOUSE_EXTRA_CONF_DIRS}" | grep -q 'scheduler[[:space:]]*$'; then
  log WARN 'The scheduler-job-clean_old_files component is enabled but the scheduler component is not. This WILL cause problems. Please disable the scheduler-job-clean_old_files component.'
fi

_acceptable_modes='|mtime|ctime|atime|'

if [ "${FINCH_SCHEDULER_JOB_CLEAN_OLD_FILES_ENABLED}" = "true" ] && ! echo "${BIRDHOUSE_EXTRA_CONF_DIRS}" | grep -q 'finch[[:space:]]*$'; then
  echo "$FINCH_WPS_OUTPUTS_DELETE_FILES_OLDER_THAN_DAYS" | grep -q '^[0-9][0-9]*$' || log WARN "FINCH_WPS_OUTPUTS_DELETE_FILES_OLDER_THAN_DAYS variable must be an integer not '${FINCH_WPS_OUTPUTS_DELETE_FILES_OLDER_THAN_DAYS}'. Please set this variable to an integer or disable the finch file cleaning job. This job will not run properly!"
  [ "${_acceptable_modes#*"${FINCH_WPS_OUTPUTS_DELETE_FILES_TIME_MODE}"}" = "${_acceptable_modes}" ] && log WARN "FINCH_WPS_OUTPUTS_DELETE_FILES_TIME_MODE variable must be one of 'mtime', 'atime', or 'ctime' not '${FINCH_WPS_OUTPUTS_DELETE_FILES_TIME_MODE}'. Please set this variable to a valid option or disable the finch file cleaning job. This job will not run properly!"
fi

if [ "${HUMMINGBIRD_SCHEDULER_JOB_CLEAN_OLD_FILES_ENABLED}" = "true" ] && ! echo "${BIRDHOUSE_EXTRA_CONF_DIRS}" | grep -q 'hummingbird[[:space:]]*$'; then
  echo "$HUMMINGBIRD_WPS_OUTPUTS_DELETE_FILES_OLDER_THAN_DAYS" | grep -q '^[0-9][0-9]*$' || log WARN "HUMMINGBIRD_WPS_OUTPUTS_DELETE_FILES_OLDER_THAN_DAYS variable must be an integer not '${HUMMINGBIRD_WPS_OUTPUTS_DELETE_FILES_OLDER_THAN_DAYS}'. Please set this variable to an integer or disable the hummingbird file cleaning job. This job will not run properly!"
  [ "${_acceptable_modes#*"${HUMMINGBIRD_WPS_OUTPUTS_DELETE_FILES_TIME_MODE}"}" = "${_acceptable_modes}" ] && log WARN "HUMMINGBIRD_WPS_OUTPUTS_DELETE_FILES_TIME_MODE variable must be one of 'mtime', 'atime', or 'ctime' not '${HUMMINGBIRD_WPS_OUTPUTS_DELETE_FILES_TIME_MODE}'. Please set this variable to a valid option or disable the hummingbird file cleaning job. This job will not run properly!"
fi

if [ "${RAVEN_SCHEDULER_JOB_CLEAN_OLD_FILES_ENABLED}" = "true" ] && ! echo "${BIRDHOUSE_EXTRA_CONF_DIRS}" | grep -q 'raven[[:space:]]*$'; then
  echo "$RAVEN_WPS_OUTPUTS_DELETE_FILES_OLDER_THAN_DAYS" | grep -q '^[0-9][0-9]*$' || log WARN "RAVEN_WPS_OUTPUTS_DELETE_FILES_OLDER_THAN_DAYS variable must be an integer not '${RAVEN_WPS_OUTPUTS_DELETE_FILES_OLDER_THAN_DAYS}'. Please set this variable to an integer or disable the raven file cleaning job. This job will not run properly!"
  [ "${_acceptable_modes#*"${RAVEN_WPS_OUTPUTS_DELETE_FILES_TIME_MODE}"}" = "${_acceptable_modes}" ] && log WARN "RAVEN_WPS_OUTPUTS_DELETE_FILES_TIME_MODE variable must be one of 'mtime', 'atime', or 'ctime' not '${RAVEN_WPS_OUTPUTS_DELETE_FILES_TIME_MODE}'. Please set this variable to a valid option or disable the raven file cleaning job. This job will not run properly!"
fi

if [ "${THREDDS_SCHEDULER_JOB_CLEAN_OLD_FILES_ENABLED}" = "true" ] && ! echo "${BIRDHOUSE_EXTRA_CONF_DIRS}" | grep -q 'thredds[[:space:]]*$'; then
  echo "$THREDDS_LOGS_DELETE_FILES_OLDER_THAN_DAYS" | grep -q '^[0-9][0-9]*$' || log WARN "THREDDS_LOGS_DELETE_FILES_OLDER_THAN_DAYS variable must be an integer not '${THREDDS_LOGS_DELETE_FILES_OLDER_THAN_DAYS}'. Please set this variable to an integer or disable the thredds file cleaning job. This job will not run properly!"
  [ "${_acceptable_modes#*"${THREDDS_LOGS_DELETE_FILES_TIME_MODE}"}" = "${_acceptable_modes}" ] && log WARN "THREDDS_LOGS_DELETE_FILES_TIME_MODE variable must be one of 'mtime', 'atime', or 'ctime' not '${THREDDS_LOGS_DELETE_FILES_TIME_MODE}'. Please set this variable to a valid option or disable the thredds file cleaning job. This job will not run properly!"
fi
