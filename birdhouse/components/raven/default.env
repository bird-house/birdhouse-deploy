# The Geoserver that Raven will connect to.
# Same default value as
# https://github.com/CSHS-CWRA/RavenPy/blob/1dc534cd3b7faed2ff18a90a915d448b2fca6bf7/src/ravenpy/utilities/geoserver.py#L50-L52
# https://github.com/Ouranosinc/raven/blob/4a5cc6462b4a5b89a465f3b4dc99a617591c44f9/src/raven/utilities/geoserver.py#L45
# This is the production Geoserver that is always available with appropriate data.
# For site that want to run your own Geoserver with your own data, please
# override this variable with your own Geoserver instance.
# Ex: RAVEN_GEO_URL="${BIRDHOUSE_PROXY_SCHEME}://${BIRDHOUSE_FQDN}/geoserver/"
# The mapping to GEO_URL is done in components/raven/docker-compose-extra.yml.
__DEFAULT__RAVEN_GEO_URL="https://pavics.ouranos.ca/geoserver/"
export RAVEN_GEO_URL='${__DEFAULT__RAVEN_GEO_URL}'

export RAVEN_VERSION="0.19.0"
export RAVEN_DOCKER=pavics/raven
export RAVEN_IMAGE='${RAVEN_DOCKER}:${RAVEN_VERSION}'
export RAVEN_IMAGE_URI='registry.hub.docker.com/${RAVEN_IMAGE}'

# This tells the postgres service to create a database on startup
export POSTGRES_DATABASES_TO_CREATE="
  $POSTGRES_DATABASES_TO_CREATE
  raven
"

# registration of WPS providers
export WEAVER_WPS_PROVIDERS="
  $WEAVER_WPS_PROVIDERS
  raven
"

# add any component that this component requires to run
COMPONENT_DEPENDENCIES="
  ./components/postgres
  ./components/wps_outputs-volume
"

export DELAYED_EVAL="
  $DELAYED_EVAL
  RAVEN_IMAGE
  RAVEN_IMAGE_URI
  RAVEN_GEO_URL
"

OPTIONAL_VARS="
  $OPTIONAL_VARS
  \$RAVEN_VERSION
  \$RAVEN_GEO_URL
  \$RAVEN_DOCKER
  \$RAVEN_IMAGE
  \$RAVEN_IMAGE_URI
"
