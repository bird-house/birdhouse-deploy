providers:
  # definition of STAC service for API access
  stac:
    url: http://stac:8000
    title: STAC
    public: true
    c4i: false
    type: api
    sync_type: api
    hooks:
      - type: response
        path: "/stac/collections/?"
        method: POST
        target: /opt/birdhouse/src/magpie/hooks/stac_hooks.py:create_collection_resource
      - type: response
        path: "/stac/collections/[\\w-]+/items/?"
        method: POST
        target: /opt/birdhouse/src/magpie/hooks/stac_hooks.py:create_item_resource

permissions:
  # create a default 'stac' resource under 'stac' service
  # because of the '/stac/stac' path prefix required to resolve the API links properly,
  # all permissions must be nested under this 'stac' resource for requests and permissions to be resolved accordingly
  - service: stac
    resource: /stac
    permission: write
    group: stac-admin  # create a stac-admin group that can read/write to all stac endpoints
    action: create
  - service: stac
    resource: /stac
    permission: read
    group: stac-admin
    action: create
