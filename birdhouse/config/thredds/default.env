# All env in this default.env can be overridden by env.local.

# thredds-docker >= 4.6.18 or >= 5.2 strongly recommended to avoid Log4J CVE-2021-44228.
export THREDDS_VERSION=4.6.18-unidata-2022-01
export THREDDS_DOCKER=pavics/thredds-docker
export THREDDS_IMAGE="${THREDDS_DOCKER}:${THREDDS_VERSION}"
export THREDDS_ORGANIZATION="Birdhouse"

export THREDDS_CONTEXT_ROOT='${TWITCHER_PROTECTED_PATH}/thredds'

# add any new variables not already in 'VARS' or 'OPTIONAL_VARS' that must be replaced in templates here
VARS="
  $VARS
  \$TWITCHER_VERIFY_PATH
  \$CMIP5_THREDDS_ROOT
"

OPTIONAL_VARS="
  $OPTIONAL_VARS
  \$THREDDS_ORGANIZATION
  \$THREDDS_DOCKER
  \$THREDDS_VERSION
  \$THREDDS_CONTEXT_ROOT
"

# Endpoint to verify Magpie/Twitcher authorization to a service/resource by a user without proxy request
# Requires Twitcher>=0.8.0, Required for 'optional-compontents/secure-data-proxy'
export TWITCHER_VERIFY_PATH='$(echo "${TWITCHER_PROTECTED_PATH}" | sed "s/proxy/verify/")'

export DELAYED_EVAL="
  $DELAYED_EVAL
  TWITCHER_VERIFY_PATH
  THREDDS_CONTEXT_ROOT
"

# add any component that this component requires to run
COMPONENT_DEPENDENCIES="
  ./config/magpie
  ./config/twitcher

