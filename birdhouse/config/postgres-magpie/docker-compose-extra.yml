version: "3.4"

x-logging:
  &default-logging
  driver: "json-file"
  options:
    max-size: "50m"
    max-file: "10"

services:
  postgres-magpie:
    image: postgres:9.6
    container_name: postgres-magpie
    # ports:  # should not be exposed directly, enable 'optional-components/database-external-ports' as needed
    env_file:
      - ./config/postgres-magpie/credentials.env
    environment:
      PGDATA: /var/lib/postgresql/data/pgdata
    volumes:
      - ${MAGPIE_PERSIST_DIR}:/var/lib/postgresql/data/pgdata
      - ./config/postgres-magpie/docker-entrypoint-initdb.d:/docker-entrypoint-initdb.d
    restart: always
    logging: *default-logging
