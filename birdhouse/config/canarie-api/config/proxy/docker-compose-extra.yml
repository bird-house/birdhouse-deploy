version: "3.4"
services:
  proxy:
    volumes:
      - ./canarie-api/config/proxy/conf.extra-service.d:/etc/nginx/conf.extra-service.d/canarie-api:ro
      - ./canarie-api/docker_configuration.py:/config/docker_configuration.py
      - ./canarie-api/entrypoint:/entrypoint:ro
    environment:
      CANARIE_API_CONFIG_FN: /config/docker_configuration.py
      CANARIE_MONITORING_EXTRA_CONF_DIR: ${CANARIE_MONITORING_EXTRA_CONF_DIR}
    entrypoint: /entrypoint
