version: "3.4"

services:
  # extend twitcher with MagpieAdapter hooks employed for weaver proxied requests
  twitcher:
    volumes:
      # NOTE: MagpieAdapter hooks are defined within Magpie config, but it is actually Twitcher proxy that runs them
      # target mount location depends on main docker-compose 'MAGPIE_PROVIDERS_CONFIG_PATH' environment variable
      - ./config/jupyterhub/config/magpie/providers.cfg:/opt/birdhouse/src/magpie/config/jupyterhub_providers.cfg:ro
      - ./config/jupyterhub/config/twitcher/web_hooks.py:/opt/birdhouse/src/magpie/hooks/jupyterhub_hooks.py:ro
