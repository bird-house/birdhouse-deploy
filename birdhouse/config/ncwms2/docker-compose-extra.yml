version: "3.4"

x-logging:
  &default-logging
  driver: "json-file"
  options:
    max-size: "50m"
    max-file: "10"

services:
  ncwms2:
    image: pavics/ncwms2:2.0.4
    container_name: ncwms2
    ports:
      - "8080:8080"
      - "48080:9001"
    volumes:
      - ${DATA_PERSIST_ROOT}/datasets:/pavics-data
      - ./config/ncwms2/custom.cfg:/opt/birdhouse/custom.cfg
      - ./config/ncwms2/server.xml:/opt/birdhouse/eggs/birdhousebuilder.recipe.tomcat-0.2.9-py2.7.egg/birdhousebuilder/recipe/tomcat/server.xml
    restart: always
    logging: *default-logging
